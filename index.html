<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<title>UPPO GAME</title>
<style>
body {
  font-family: sans-serif;
  text-align: center;
  padding-top: 80px;
}
input, button {
  font-size: 18px;
  padding: 10px;
  margin: 10px;
}
#result {
  font-size: 28px;
  margin-top: 30px;
  font-weight: bold;
}
#formLink {
  display: none;
  margin-top: 40px;
}
</style>
</head>
<body>

<h2 id="title">닉네임을 입력하세요</h2>
<input id="nickname" placeholder="닉네임">
<br>
<button onclick="joinGame()">입장</button>

<div id="result"></div>

<div id="formLink">
  <h3>이제 투표에 참여하세요</h3>
  <a href="https://docs.google.com/forms/d/e/1FAIpQLSdaFacNEOpuVPWfyrxA3iOkgQOyZD30tl7qNWT2AfylKkA4Sw/viewform?usp=header" target="_blank">
    <button>구글폼 투표하기</button>
  </a>
</div>

<script>
const SCRIPT_URL = "https://script.google.com/macros/s/AKfycbz6y6ktls-vLXst-XJWiJjE9pUukYLxRZvbF0moakh6Kwzp0TuyMcG_lvaa-2uiOiyX/exec";

function joinGame() {
  const nickname = document.getElementById("nickname").value.trim();
  if (!nickname) {
    alert("닉네임을 입력하세요.");
    return;
  }

  fetch(SCRIPT_URL, {
    method: "POST",
    body: JSON.stringify({ nickname: nickname })
  })
  .then(res => res.json())
  .then(data => {
    if (data.error) {
      document.getElementById("result").innerText = data.error;
    } else {
      if (data.role === "가짜") {
        document.getElementById("result").innerHTML =
          "당신은 <span style='color:red'>가짜</span>입니다.<br><br>새로운 취미로 사람들을 속이세요.";
      } else {
        document.getElementById("result").innerHTML =
          "당신은 <span style='color:blue'>진짜</span>입니다.";
      }

      // 구글폼 표시
      document.getElementById("formLink").style.display = "block";
    }
  })
  .catch(() => {
    document.getElementById("result").innerText = "서버 연결 오류";
  });
}
</script>

</body>
</html>
